"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=_interopDefault(require("react"));function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}var root="undefined"!=typeof window?window:global,rAF=root.requestAnimationFrame?root.requestAnimationFrame.bind(root):function(e){return root.setTimeout(e,16)},cAF=root.cancelAnimationFrame?root.cancelAnimationFrame.bind(root):root.clearInterval.bind(root),TOGGLE=Object.freeze({EXPANDED:"EXPANDED",COLLAPSED:"COLLAPSED",EXPANDING:"EXPANDING",COLLAPSING:"COLLAPSING"}),easeInOutCubic=function(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1},util={isMoving:function(e){return e===TOGGLE.EXPANDING||e===TOGGLE.COLLAPSING},clamp:function(e){var t=e.value,s=e.max,a=void 0===s?1:s,o=e.min,r=void 0===o?0:o;return t>a?a:t<r?r:t},now:function(){return Date.now()},sanitizeDuration:function(e){return Math.max(0,parseInt(+e,10)||0)},interpolate:function(e){var t=e.next,s=e.prev,a=Math.abs(t-s),o=t;return a>.15&&(t>s?o-=.75*a:o+=.75*a),o}},SlideToggle=function(e){function t(){var e,s;_classCallCheck(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return _defineProperty(_assertThisInitialized(s=_possibleConstructorReturn(this,(e=_getPrototypeOf(t)).call.apply(e,[this].concat(o)))),"_state_",{collapsibleElement:null,toggleState:s.props.collapsed?TOGGLE.COLLAPSED:TOGGLE.EXPANDED}),_defineProperty(_assertThisInitialized(s),"GET_HEIGHT",s.props.offsetHeight?"offsetHeight":"scrollHeight"),_defineProperty(_assertThisInitialized(s),"state",{toggleState:s._state_.toggleState,hasReversed:!1,range:s.props.collapsed?0:1,progress:s.props.collapsed?0:1}),_defineProperty(_assertThisInitialized(s),"getCollapsible",(function(){return s._state_.collapsibleElement})),_defineProperty(_assertThisInitialized(s),"updateCollapsible",(function(e,t){s.getCollapsible()&&(s._state_.collapsibleElement.style[e]=t)})),_defineProperty(_assertThisInitialized(s),"setCollapsibleElement",(function(e){s._state_.collapsibleElement=e,s._state_.collapsibleElement&&!s.props.noOverflowHidden&&(s._state_.collapsibleElement.style.overflow="hidden"),s._state_.toggleState===TOGGLE.COLLAPSED&&s.setCollapsedState({initialState:!0})})),_defineProperty(_assertThisInitialized(s),"toggle",(function(){if(!s.props.irreversible||!util.isMoving(s._state_.toggleState)){var e=function(){s.props.onCollapsing&&s.props.onCollapsing({range:s.state.range,progress:s.state.progress,hasReversed:s.state.hasReversed}),s.collapse()},t=function(){s.props.onExpanding&&s.props.onExpanding({range:s.state.range,progress:s.state.progress,hasReversed:s.state.hasReversed}),s.expand()},a=function(e){var t=e.toggleState,a=e.display,o=e.hasReversed;s._state_.toggleState=t,s._state_.hasReversed=!!o,void 0===a||s.props.noDisplayStyle||s.updateCollapsible("display",a);var r=util.now();if(o){var i=s._state_.startTime,n=util.sanitizeDuration(s.props.duration),l=Math.min(n,r-i),p=Math.max(0,n-l);s._state_.startTime=r-p}else{var g=s.getCollapsible();g&&g.style.height&&s.updateCollapsible("height",null),s._state_.boxHeight=g?g[s.GET_HEIGHT]:0,s._state_.startTime=r,s._state_.startDirection=t}s.setState({toggleState:s._state_.toggleState,hasReversed:s._state_.hasReversed})};switch(s._state_.toggleState){case TOGGLE.EXPANDED:a({toggleState:TOGGLE.COLLAPSING}),e();break;case TOGGLE.COLLAPSED:a({toggleState:TOGGLE.EXPANDING,display:""}),t();break;case TOGGLE.EXPANDING:a({toggleState:TOGGLE.COLLAPSING,hasReversed:!0}),e();break;case TOGGLE.COLLAPSING:a({toggleState:TOGGLE.EXPANDING,display:"",hasReversed:!0}),t()}}})),_defineProperty(_assertThisInitialized(s),"setExpandedState",(function(){s._state_.progress=1,s._state_.toggleState=TOGGLE.EXPANDED,s.updateCollapsible("height",null),s.setState({toggleState:TOGGLE.EXPANDED,range:1,progress:s._state_.progress}),s.props.onExpanded&&s.props.onExpanded({hasReversed:s.state.hasReversed})})),_defineProperty(_assertThisInitialized(s),"expand",(function(){if(s._state_.toggleState===TOGGLE.EXPANDING){var e=util.sanitizeDuration(s.props.duration);if(e<=0)s.setExpandedState();else{var t=s._state_.startTime,a=Math.min(e,util.now()-t);if(a>=e)s.setExpandedState();else{var o,r=s._state_,i=r.startDirection,n=r.toggleState,l=r.boxHeight,p=util.clamp({value:a/e});o=s.props.whenReversedUseBackwardEase&&i!==n?1-s.props.easeCollapse(1-p):s.props.easeExpand(p),s.props.bestPerformance||s.setState({range:p,progress:o}),s.props.interpolateOnReverse&&s._state_.hasReversed&&(o=util.interpolate({next:o,prev:s._state_.progress}));var g=Math.round(l*o);s._state_.progress=o,s.updateCollapsible("height","".concat(g,"px")),s.nextTick(s.expand)}}}})),_defineProperty(_assertThisInitialized(s),"setCollapsedState",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialState;s._state_.progress=0,s._state_.toggleState=TOGGLE.COLLAPSED,s.props.noDisplayStyle?s.updateCollapsible("height","0px"):(s.updateCollapsible("display","none"),s.updateCollapsible("height",null)),s.setState({toggleState:TOGGLE.COLLAPSED,range:0,progress:s._state_.progress}),!t&&s.props.onCollapsed&&s.props.onCollapsed({hasReversed:s.state.hasReversed})})),_defineProperty(_assertThisInitialized(s),"collapse",(function(){if(s._state_.toggleState===TOGGLE.COLLAPSING){var e=util.sanitizeDuration(s.props.duration);if(e<=0)s.setCollapsedState();else{var t=s._state_.startTime,a=Math.min(e,util.now()-t);if(a>=e)s.setCollapsedState();else{var o,r=s._state_,i=r.startDirection,n=r.boxHeight,l=r.toggleState,p=1-util.clamp({value:a/e}),g=s.props,u=g.whenReversedUseBackwardEase,_=g.easeExpand,d=g.easeCollapse;o=u&&i!==l?_(p):1-d(1-p),s.props.bestPerformance||s.setState({range:p,progress:o}),s.props.interpolateOnReverse&&s._state_.hasReversed&&(o=util.interpolate({next:o,prev:s._state_.progress}));var c=Math.round(n*o);s._state_.progress=o,s._state_.timeout=s.nextTick(s.collapse),s.updateCollapsible("height","".concat(c,"px"))}}}})),_defineProperty(_assertThisInitialized(s),"nextTick",(function(e){s._state_.timeout=rAF(e)})),s}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e={onToggle:this.toggle,toggle:this.toggle,setCollapsibleElement:this.setCollapsibleElement,toggleState:this.state.toggleState,hasReversed:this.state.hasReversed,isMoving:util.isMoving(this.state.toggleState),range:this.state.range,progress:this.state.progress};return"function"==typeof this.props.children?this.props.children(e):this.props.render?this.props.render(e):this.props.children}},{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount({toggleState:this.state.toggleState,toggle:this.toggle})}},{key:"componentDidUpdate",value:function(e,t){this.props.collapseEvent&&this.props.collapseEvent>e.collapseEvent&&(this._state_.toggleState!==TOGGLE.EXPANDED&&this._state_.toggleState!==TOGGLE.EXPANDING||this.toggle()),this.props.expandEvent&&this.props.expandEvent>e.expandEvent&&(this._state_.toggleState!==TOGGLE.COLLAPSED&&this._state_.toggleState!==TOGGLE.COLLAPSING||this.toggle()),this.props.toggleEvent&&this.props.toggleEvent>e.toggleEvent&&this.toggle()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount&&this.props.onUnmount({toggleState:this.state.toggleState}),this._state_.timeout&&cAF(this._state_.timeout)}}]),t}();_defineProperty(SlideToggle,"defaultProps",{duration:300,easeCollapse:easeInOutCubic,easeExpand:easeInOutCubic}),module.exports=SlideToggle;
//# sourceMappingURL=ReactSlideToggle.cjs.js.map
