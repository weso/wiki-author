{"ast":null,"code":"import _slicedToArray from \"/home/mistermboy/repositories/wiki-author/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/mistermboy/repositories/wiki-author/src/components/mainComps/assistant/tabs/shEx/headers/TripleHeader.js\";\nimport React, { useState, useContext } from 'react';\nimport { AppContext } from '../../../../../../App';\nimport { ShapeContext } from '../ShapeComponent';\nimport yasheUtils from '../../../../../../utils/yasheUtils';\nimport Properties from '../../../../../../conf/properties';\nimport { Typeahead } from 'react-bootstrap-typeahead';\nimport '../../../../../../css/shexComponents/headers/TripleHeader.css';\nimport $ from 'jquery';\nconst primitives = ['String', 'Integer', 'Date', 'Boolean', 'Custom'];\nvar API_ENDPOINT = 'https://www.wikidata.org/w/';\nvar QUERY = {\n  action: 'wbsearchentities',\n  language: (navigator.language || navigator.userLanguage).split(\"-\")[0],\n  continue: 0,\n  limit: 50,\n  format: 'json'\n};\n\nfunction TripleHeader(props) {\n  const context = useContext(AppContext);\n  const shapeContext = useContext(ShapeContext);\n  const styles = Properties.getInstance().getTripleStyle();\n  const disabled = shapeContext.disabled;\n  let top100Films = [{\n    id: '1',\n    label: 'Human',\n    descr: 'asdas'\n  }, {\n    id: '2',\n    label: 'Human',\n    descr: 'asdas'\n  }];\n  const triple = props.triple,\n        deleteTriple = props.deleteTriple,\n        customizeRef = props.customizeRef,\n        customizeContraints = props.customizeContraints,\n        customizeCardinality = props.customizeCardinality,\n        collapseToggle = props.collapseToggle,\n        colapseBtn = props.colapseBtn;\n\n  const _useState = useState(triple.type.value),\n        _useState2 = _slicedToArray(_useState, 2),\n        name = _useState2[0],\n        setName = _useState2[1];\n\n  const _useState3 = useState(top100Films),\n        _useState4 = _slicedToArray(_useState3, 2),\n        options = _useState4[0],\n        setOptions = _useState4[1];\n\n  const handleNameChange = function (e) {\n    const name = e.target.value;\n    triple.type.setValue(name);\n    context.emit();\n    setName(name);\n  };\n\n  const MenuItem = ({\n    item\n  }) => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, item.id), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, item.label), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, item.descr)));\n\n  $('.rbt-input-main').on('keyup', function (e) {\n    QUERY.search = e.target.value;\n    $.get({\n      url: API_ENDPOINT + 'api.php?' + $.param(QUERY),\n      dataType: 'jsonp'\n    }).done(data => {\n      console.log(data);\n      top100Films = [];\n      Object.keys(data).map(d => {\n        top100Films.push({\n          id: data[d].id,\n          label: data[d].label,\n          descr: data[d].description\n        });\n      });\n      console.log(top100Films);\n      setOptions(top100Films);\n    });\n  });\n  return React.createElement(\"div\", {\n    className: \"xs-tripleHeader\",\n    style: styles.header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(Typeahead, {\n    id: \"properties\",\n    className: \"autoInput\",\n    filterBy: ['id', 'label', 'descr'],\n    labelKey: \"label\",\n    options: options,\n    maxResults: 10,\n    minLength: 1,\n    placeholder: \"E.. or label\",\n    renderMenuItemChildren: (option, props) => React.createElement(MenuItem, {\n      key: option.id,\n      item: option,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }),\n    useCache: false,\n    onChange: selected => {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"tripleBtns buildConstraint buildBtn buildTripleBtn mdc-icon-button material-icons\",\n    style: styles.constraint,\n    onClick: customizeContraints,\n    disabled: disabled,\n    title: \"Customize Constraint\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"build\"), React.createElement(\"button\", {\n    className: \"tripleBtns buildInlineRef buildBtn buildTripleBtn mdc-icon-button material-icons\",\n    style: styles.shapeRef,\n    onClick: customizeRef,\n    disabled: disabled,\n    title: \"Customize Shape Reference\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"build\"), React.createElement(\"button\", {\n    className: \"tripleBtns buildCardinality buildBtn buildTripleBtn mdc-icon-button material-icons\",\n    style: styles.cardinality,\n    onClick: customizeCardinality,\n    disabled: disabled,\n    title: \"Customize Cardinality\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"build\"), React.createElement(\"button\", {\n    className: \"tripleBtns deleteTripleBtn mdc-icon-button material-icons\",\n    style: styles.delete,\n    onClick: () => deleteTriple(triple.id),\n    disabled: disabled,\n    title: \"Delete Triple Constraint\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"delete\"), React.createElement(\"button\", {\n    className: \"collapseBtn mdc-icon-button material-icons\",\n    style: styles.collapse,\n    onClick: collapseToggle,\n    disabled: disabled,\n    title: \"Customize all\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, colapseBtn));\n}\n\nexport default TripleHeader;","map":{"version":3,"sources":["/home/mistermboy/repositories/wiki-author/src/components/mainComps/assistant/tabs/shEx/headers/TripleHeader.js"],"names":["React","useState","useContext","AppContext","ShapeContext","yasheUtils","Properties","Typeahead","$","primitives","API_ENDPOINT","QUERY","action","language","navigator","userLanguage","split","continue","limit","format","TripleHeader","props","context","shapeContext","styles","getInstance","getTripleStyle","disabled","top100Films","id","label","descr","triple","deleteTriple","customizeRef","customizeContraints","customizeCardinality","collapseToggle","colapseBtn","type","value","name","setName","options","setOptions","handleNameChange","e","target","setValue","emit","MenuItem","item","on","search","get","url","param","dataType","done","data","console","log","Object","keys","map","d","push","description","header","option","selected","constraint","shapeRef","cardinality","delete","collapse"],"mappings":"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","sourcesContent":["import React,{useState,useContext} from 'react';\nimport {AppContext} from '../../../../../../App';\nimport {ShapeContext} from '../ShapeComponent';\nimport yasheUtils from '../../../../../../utils/yasheUtils';\nimport Properties from '../../../../../../conf/properties';\nimport {Typeahead} from 'react-bootstrap-typeahead';\nimport '../../../../../../css/shexComponents/headers/TripleHeader.css';\n\nimport $ from 'jquery';\n\nconst primitives = ['String','Integer','Date','Boolean','Custom'];\n\n\nvar API_ENDPOINT = 'https://www.wikidata.org/w/';\nvar QUERY = {\n\n  action:'wbsearchentities',\n  language:(navigator.language || navigator.userLanguage).split(\"-\")[0],\n  continue:0,\n  limit:50,\n  format: 'json',\n}\n\nfunction TripleHeader (props) {\n\n    const context = useContext(AppContext);\n    const shapeContext = useContext(ShapeContext);\n    const styles = Properties.getInstance().getTripleStyle();\n    const disabled = shapeContext.disabled;\n    let top100Films =[{id:'1',label:'Human',descr:'asdas'},{id:'2',label:'Human',descr:'asdas'}]\n\n    const { triple,\n            deleteTriple,\n            customizeRef,\n            customizeContraints,\n            customizeCardinality,\n            collapseToggle,\n            colapseBtn\n            } = props;\n\n    const [name,setName] = useState(triple.type.value);\n    const [options,setOptions] = useState(top100Films);\n\n    const handleNameChange = function(e){\n        const name = e.target.value;\n        triple.type.setValue(name);\n        context.emit();\n        setName(name);\n    }\n\n const MenuItem = ({item}) => (\n        <div>\n            <span>{item.id}</span><br/>\n            <span>{item.label}</span><br/>\n            <span><b>{item.descr}</b></span>\n        </div>\n    );\n\n\n$('.rbt-input-main').on('keyup', function (e) {\n   QUERY.search = e.target.value;\n   $.get({\n        url: API_ENDPOINT + 'api.php?' + $.param(QUERY),\n        dataType: 'jsonp',\n   }).done((data)=>{\n           console.log(data)\n           top100Films=[];\n           Object.keys(data).map(d=>{\n                   top100Films.push({id:data[d].id,label:data[d].label,descr:data[d].description})\n           })\n           console.log(top100Films)\n           setOptions(top100Films);\n   })\n})\n\n   \n    return (\n        <div className=\"xs-tripleHeader\" style={styles.header}>\n                    \n           <Typeahead\n           id='properties'\n                className='autoInput'\n                filterBy={['id','label','descr']}\n                labelKey=\"label\"\n                options={options}\n                maxResults = {10}\n                minLength={1}\n                placeholder=\"E.. or label\"\n                renderMenuItemChildren={(option, props) => (\n                    <MenuItem key={option.id} item={option}/>\n                )}\n                useCache={false}\n                onChange={(selected) => {\n                  \n                }}\n            />\n\n\n            <button className=\"tripleBtns buildConstraint buildBtn buildTripleBtn mdc-icon-button material-icons\"\n                    style={styles.constraint}\n                    onClick={customizeContraints}\n                    disabled={disabled} \n                    title=\"Customize Constraint\">\n                    build\n            </button>\n\n            <button className=\"tripleBtns buildInlineRef buildBtn buildTripleBtn mdc-icon-button material-icons\"  \n                    style={styles.shapeRef}\n                    onClick={customizeRef}\n                    disabled={disabled} \n                    title=\"Customize Shape Reference\">\n                    build\n            </button>\n\n           \n            <button className=\"tripleBtns buildCardinality buildBtn buildTripleBtn mdc-icon-button material-icons\" \n                    style={styles.cardinality}\n                    onClick={customizeCardinality}\n                    disabled={disabled} \n                    title=\"Customize Cardinality\">\n                    build\n            </button>\n\n            <button className=\"tripleBtns deleteTripleBtn mdc-icon-button material-icons\"\n                    style={styles.delete}\n                    onClick={()=>deleteTriple(triple.id)}\n                    disabled={disabled} \n                    title=\"Delete Triple Constraint\">\n                    delete\n            </button>\n\n            <button className=\"collapseBtn mdc-icon-button material-icons\" \n                    style={styles.collapse}\n                    onClick={collapseToggle}\n                    disabled={disabled} \n                    title=\"Customize all\">\n                    {colapseBtn}\n            </button>\n        </div>\n    );\n                                   \n    \n}\n\n\nexport default TripleHeader;\n\n"]},"metadata":{},"sourceType":"module"}