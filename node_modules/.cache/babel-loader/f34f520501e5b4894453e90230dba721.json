{"ast":null,"code":"import Codemirror from 'codemirror';\nimport Editor from '../entities/editor';\nimport { defaultExample } from '../shapes/defaultExample';\nimport { wikiExample } from '../shapes/wikiExample';\nexport function readFile(files) {\n  //Only one file allowed\n  if (files.length > 1) {\n    return;\n  }\n\n  var file = files[0]; //Only ShEx files allowed\n\n  if (!file.name.endsWith('.shex')) {\n    return;\n  }\n\n  var reader = new FileReader();\n\n  reader.onload = function (event) {\n    Editor.getInstance().getYashe().setValue(event.target.result);\n  };\n\n  reader.readAsText(file);\n  Codemirror.signal(Editor.getInstance().getYashe(), 'upload');\n}\nexport function downloadFile() {\n  var textFileAsBlob = new Blob([Editor.getInstance().getYashe().getValue()], {\n    type: 'text/shex'\n  });\n  var fileNameToSaveAs = \"document.shex\";\n  var downloadLink = document.createElement(\"a\");\n  downloadLink.download = fileNameToSaveAs;\n  downloadLink.innerHTML = \"Download File\";\n\n  if (window.URL != null) {\n    // Chrome allows the link to be clicked without actually adding it to the DOM.\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n  } else {\n    // Firefox requires the link to be added to the DOM before it can be clicked.\n    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n    downloadLink.style.display = \"none\";\n    document.body.appendChild(downloadLink);\n  }\n\n  downloadLink.click();\n}\nexport function changeTheme() {\n  let yashe = Editor.getInstance().getYashe();\n  var themeValue = 'wiki';\n  var color = 'black';\n\n  if (yashe.getOption('theme') == 'wiki') {\n    themeValue = 'dark';\n    color = 'white';\n    document.getElementById(\"downloadBtn\").classList.add('light');\n    document.getElementById(\"copyBtn\").classList.add('light');\n    document.getElementById(\"deleteBtn\").classList.add('light');\n    document.getElementById(\"themeBtn\").classList.add('light');\n    document.getElementById(\"smallBtn\").classList.add('light');\n    document.getElementById(\"fullBtn\").classList.add('light');\n    document.getElementById(\"uploadBntLabel\").classList.add('light');\n  } else {\n    document.getElementById(\"downloadBtn\").classList.remove('light');\n    document.getElementById(\"copyBtn\").classList.remove('light');\n    document.getElementById(\"deleteBtn\").classList.remove('light');\n    document.getElementById(\"themeBtn\").classList.remove('light');\n    document.getElementById(\"smallBtn\").classList.remove('light');\n    document.getElementById(\"fullBtn\").classList.remove('light');\n    document.getElementById(\"uploadBntLabel\").classList.remove('light');\n  }\n\n  yashe.setOption(\"theme\", themeValue);\n  Codemirror.signal(yashe, 'themeChange');\n}\nexport function loadExample(example) {\n  let yashe = Editor.getInstance().getYashe();\n\n  if (example == 'default') {\n    yashe.setValue(defaultExample);\n  } else {\n    yashe.setValue(wikiExample);\n  }\n\n  setTimeout(() => {\n    //needed\n    Codemirror.signal(yashe, 'galery');\n  }, 10);\n}\nexport function scrollTop() {\n  window.scrollTo(0, 0);\n}\nexport function undo() {\n  let yashe = Editor.getInstance().getYashe();\n  yashe.undo();\n}\nexport function redo() {\n  let yashe = Editor.getInstance().getYashe();\n  yashe.redo();\n}","map":{"version":3,"sources":["/home/mistermboy/repositories/wiki-author/src/utils/toolbarUtils.js"],"names":["Codemirror","Editor","defaultExample","wikiExample","readFile","files","length","file","name","endsWith","reader","FileReader","onload","event","getInstance","getYashe","setValue","target","result","readAsText","signal","downloadFile","textFileAsBlob","Blob","getValue","type","fileNameToSaveAs","downloadLink","document","createElement","download","innerHTML","window","URL","href","createObjectURL","style","display","body","appendChild","click","changeTheme","yashe","themeValue","color","getOption","getElementById","classList","add","remove","setOption","loadExample","example","setTimeout","scrollTop","scrollTo","undo","redo"],"mappings":"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","sourcesContent":["import Codemirror from 'codemirror';\nimport Editor from '../entities/editor';\n\nimport {defaultExample} from '../shapes/defaultExample';\nimport {wikiExample} from '../shapes/wikiExample';\n\nexport function readFile(files){\n    //Only one file allowed\n    if(files.length>1){\n        return;\n    }\n\n    var file = files[0];\n    //Only ShEx files allowed\n    if(!file.name.endsWith('.shex')){\n        return;\n    }\n    var reader = new FileReader();\n    reader.onload = function(event) {\n        Editor.getInstance().getYashe().setValue(event.target.result)\n    };\n\n    reader.readAsText(file);\n    Codemirror.signal(Editor.getInstance().getYashe(),'upload');\n}\n\nexport function downloadFile(){\n    var textFileAsBlob = new Blob([ Editor.getInstance().getYashe().getValue() ], { type: 'text/shex' });\n    var fileNameToSaveAs = \"document.shex\";\n\n    var downloadLink = document.createElement(\"a\");\n    downloadLink.download = fileNameToSaveAs;\n    downloadLink.innerHTML = \"Download File\";\n    if (window.URL != null) {\n        // Chrome allows the link to be clicked without actually adding it to the DOM.\n        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n    } else {\n        // Firefox requires the link to be added to the DOM before it can be clicked.\n        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n        downloadLink.style.display = \"none\";\n        document.body.appendChild(downloadLink);\n    }\n    downloadLink.click();\n}\n\nexport function changeTheme(){\n    let yashe = Editor.getInstance().getYashe();\n    var themeValue = 'wiki'\n    var color = 'black'\n    if(yashe.getOption('theme') == 'wiki'){\n        themeValue='dark'\n        color = 'white'\n        document.getElementById(\"downloadBtn\").classList.add('light');\n        document.getElementById(\"copyBtn\").classList.add('light');\n        document.getElementById(\"deleteBtn\").classList.add('light');\n        document.getElementById(\"themeBtn\").classList.add('light');\n        document.getElementById(\"smallBtn\").classList.add('light');\n        document.getElementById(\"fullBtn\").classList.add('light');\n        document.getElementById(\"uploadBntLabel\").classList.add('light');\n    }else{\n        document.getElementById(\"downloadBtn\").classList.remove('light');\n        document.getElementById(\"copyBtn\").classList.remove('light');\n        document.getElementById(\"deleteBtn\").classList.remove('light');\n        document.getElementById(\"themeBtn\").classList.remove('light');\n        document.getElementById(\"smallBtn\").classList.remove('light');\n        document.getElementById(\"fullBtn\").classList.remove('light');\n        document.getElementById(\"uploadBntLabel\").classList.remove('light');\n    }\n    \n    yashe.setOption(\"theme\",themeValue)\n    Codemirror.signal(yashe,'themeChange');\n\n}\n\nexport function loadExample(example){\n    let yashe = Editor.getInstance().getYashe();\n    if(example=='default'){\n        yashe.setValue(defaultExample)\n    }else{\n        yashe.setValue(wikiExample)\n    }\n    setTimeout(() => {//needed\n        Codemirror.signal(yashe,'galery');\n    }, 10); \n}\n\nexport function scrollTop(){\n    window.scrollTo(0, 0);\n}\n\n\nexport function undo(){\n    let yashe = Editor.getInstance().getYashe();\n    yashe.undo();\n}\n\nexport function redo(){\n    let yashe = Editor.getInstance().getYashe();\n    yashe.redo();\n}\n"]},"metadata":{},"sourceType":"module"}